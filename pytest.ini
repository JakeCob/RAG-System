# pytest.ini - Explicit configuration for pytest
# Note: Most config is in pyproject.toml [tool.pytest.ini_options]
# This file ensures pytest is discoverable from any directory

[pytest]
# Test discovery
testpaths = tests
pythonpath = src

# Async support - auto mode for pytest-asyncio
asyncio_mode = auto

# Verbose output with strict marker/config validation
addopts =
    -v
    --strict-markers
    --strict-config
    -ra
    --tb=short

# Custom markers for test categorization
markers =
    unit: Unit tests (fast, isolated, no external deps)
    integration: Integration tests (may require services)
    slow: Slow-running tests (excluded from default runs)
    mock_llm: Tests using mocked LLM responses
    mock_vectordb: Tests using mocked vector database
    real_embeddings: Run EmbeddingGenerator logic with a stubbed model

# Minimum pytest version
minversion = 8.0

# Fail on warnings (catch issues early)
filterwarnings =
    error
    ignore::FutureWarning
    ignore::UserWarning:torch.*
    ignore:.*CUDA.*:UserWarning
    ignore:.*GPU.*:UserWarning
    ignore:.*cuda.*:UserWarning
    ignore:.*gpu.*:UserWarning
    ignore:.*torch.classes.*:UserWarning
    ignore:.*PyTorch version.*:UserWarning
    ignore:.*not compiled with CUDA.*:UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
